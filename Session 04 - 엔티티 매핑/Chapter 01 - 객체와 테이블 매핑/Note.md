# 객체와 테이블 매핑
> 작성자: @asas6978

## 목차 
[@Entity](#Entity) <br>
[@Table](#Table)


## @Entity
클래스가 엔티티임을 명시하는 어노테이션이다.
속성 값으로는 `name`이 존재하는데, JPA에서 사용할 엔티티의 이름을 지정하는 역할을 한다.

해당 어노테이션을 사용할 때 주의해야 할 점은 다음과 같다.

### 기본 생성자 필수
JPA는 리플렉션을 이용해 객체를 생성하고 필드 값을 설정하는 방식을 이용한다.

리플렉션을 통해 클래스의 인스턴스를 생성할 때 기본 생성자가 없는 기본 생성자를 찾아서 사용할 뿐 아니라 생성자를 동적으로 호출하려면 `Constructor` 객체를 사용하는데, 해당 객체를 생성할 때 매개변수가 없는 기본 생성자를 찾아서 사용하기 때문이다.

> 리플렉션(Reflection) <br>
>  자바 프로그램이 자신의 구조를 분석하고 수정할 수 있는 능력을 가리키는 개념으로, 리플렉션을 사용하면 실행 중인 프로그램의 클래스, 메서드, 필드 등의 정보를 동적으로 가져올 수 있다.


### final 및 inner 클래스, interface, enum에서 사용 X
- **final 클래스**: @Entity 어노테이션은 JPA에서 해당 클래스를 매핑 대상으로 사용하기 위해 프록시 객체를 생성하거나 상속을 통해 추가적인 기능을 제공할 수 있어야 하는데, final 클래스는 상속이 불가능하므로 JPA가 필요한 상황에서 제한이 생기게 된다.
- **Inner 클래스**: JPA에서는 @Entity 어노테이션이 지정된 클래스가 정적인 형태를 갖도록 요구하는 조건을 가지고 있다. 하지만 Inner 클래스는 외부 클래스의 인스턴스에 종속적이거나 비정적인 상태를 갖고 있을 수 있어 JPA의 매핑 규칙과 충돌이 발생할 수 있다.
- **Interface**: 인터페이스는 구현체를 가지지 않으며, 인스턴스를 직접 생성할 수 없다. JPA는 객체를 생성하고 필드 값을 주입하기 위해 생성자를 사용하므로, 인터페이스에는 @Entity 어노테이션을 사용할 수 없다.
- **Enum**: Enum은 상수의 집합으로, 특정 값을 나타내는 불변의 인스턴스로 구성된다. JPA는 데이터베이스와 객체 사이의 매핑을 수행하는데, Enum 클래스는 이러한 매핑이 어렵거나 의미가 없는 경우가 많아서 @Entity 어노테이션을 사용할 수 없도록 해두었다.
  
### 저장할 필드에 final 사용 X
final 키워드가 필드에 지정되면 해당 필드는 변경 불가능한 상태가 되므로 JPA가 필드 값을 수정할 수 없다. 이는 JPA가 객체의 상태를 추적하고 변경사항을 데이터베이스에 반영하는 기능과 충돌하게 된다.

만약 필드의 변경을 허용하지 않는 의도가 있다면, JPA에서 해당 필드를 영속화하지 않고 매핑에서 제외하는 방법을 고려해야 하는데, @Transient 어노테이션을 사용하여 해당 필드를 매핑에서 제외하고 필요한 경우 다른 방식으로 값을 설정하도록 처리할 수 있다.


## @Table
엔티티에 매핑되는 테이블을 지정한다. 추가적인 테이블은 @SecondaryTable 또는 @SecondaryTables 어노테이션을 이용해 지정할 수 있다.

<img width="471" alt="image" src="https://github.com/luke0408/study_for_jpa_basic/assets/77332981/324562f6-99bf-4fb0-8525-ce850c02dc65">
